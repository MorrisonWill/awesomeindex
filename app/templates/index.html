{% extends "base.html" %}

{% block search %}
    <form hx-get="/search" hx-target="#search-results" hx-trigger="input changed delay:300ms from:.search-input"
          hx-indicator=".loading">
        <div class="search-box">
            <input type="text" name="q" placeholder="Search projects, tools, libraries..." autocomplete="off"
                   class="search-input" autofocus>
            <div class="search-hint">
                <span>Press</span>
                <kbd class="kbd">/</kbd>
                <span>to search</span>
            </div>
        </div>
    </form>
{% endblock %}

{% block content %}
    <div id="loading" class="loading htmx-indicator">Searching...</div>

    <div class="no-results" id="welcome">
        <h3>Search thousands of curated open source projects</h3>
        <p>Type to search across all GitHub awesome lists</p>
    </div>

    <script>
        // Hide welcome message when search results appear
        const observer = new MutationObserver(() => {
            const results = document.querySelector('#search-results');
            const welcome = document.querySelector('#welcome');
            if (results && results.innerHTML.trim()) {
                welcome.style.display = 'none';
            }
        });
        observer.observe(document.querySelector('#search-results'), {childList: true});
    </script>
{% endblock %}
